for(i in 1:length(p){
param_set<-data.frame()
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:length(p){
for(i in 1:length(p)){
param_set$levels[i] <- paste(p$levels[[i]], collapse = ',')
param_set$default[i] <- p$default[[i]]
}
param_set<-data.frame(levels=list(),default=list())
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:length(p)){
param_set$levels[i] <- paste(p$levels[[i]], collapse = ',')
param_set$default[i] <- p$default[[i]]
}
param_set<-data.frame(levels=list(rep(0,length(p))),default=list(rep(0,length(p))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:length(p)){
param_set$levels[i] <- paste(p$levels[[i]], collapse = ',')
param_set$default[i] <- p$default[[i]]
}
param_set<-data.frame(levels=list(rep(0,length(p))),default=list(rep(0,length(p))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:length(p)){
param_set$levels[i] <- paste(p$levels[[i]], collapse = ',')
param_set$default[i] <- str(p$default[[i]])
}
pd <- data.frame(class = learner$param_set$class, lower = learner$param_set$lower, learner$param_set$upper, levels = param_set$levels, default= param_set$default, storage_type = learner$param_set$storage_type)
pd <- data.frame(class = learner$param_set$class, lower = learner$param_set$lower, learner$param_set$upper, levels = param_set$levels, default= param_set$default)
nrow(learner$param_set$class)
learner$param_set$class
noname(learner$param_set$class)
unname(learner$param_set$class)
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = unname(param_set$levels), default= unname(param_set$default))
param_set$levels
length(p)
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
length(p)
nrow(p)
param_set<-data.frame(levels=list(rep(0,length(p))),default=list(rep(0,length(p))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:nrow(p)){
param_set$levels[i] <- paste(p$levels[[i]], collapse = ',')
param_set$default[i] <- str(p$default[[i]])
}
param_set<-data.frame(levels=list(rep(0,nrow(p))),default=list(rep(0,nrow(p))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:nrow(p)){
param_set$levels[i] <- paste(p$levels[[i]], collapse = ',')
param_set$default[i] <- str(p$default[[i]])
}
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels, default= unname(param_set$default))
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels, default= param_set$default)
learner$param_set$class
learner$param_set$lower
learner$param_set$upper
param_set$levels
param_set$default
p$default[[1]]
str(p$default[[i]])
str(p$default[i])
str(p$default[[i]])[1]
print(param_set)
param_set<-data.frame(levels=list(rep(0,nrow(p))),default=list(rep(0,nrow(p))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:nrow(p)){
param_set$levels[i] <- paste(p$levels[[i]], collapse = ',')
param_set$default[i] <- p$default[[i]]
}
p$default[[i]]$clone()
learner$param_set$default[1]
learner$param_set$default[[1]]
param_set<-data.frame(levels=list(rep(0,nrow(p))),default=list(rep(0,nrow(p))))
for(i in 1:nrow(learner$param_set)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ',')
param_set$default[i] <- learner$param_set$default[[i]]
}
length(learner$param_set)
param_set<-data.frame(levels=list(rep(0,length(learner$param_set))),default=list(rep(0,length(learner$param_set))))
for(i in 1:length(learner$param_set)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ',')
param_set$default[i] <- learner$param_set$default[[i]]
}
for(i in 1:length(learner$param_set)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ',')
param_set$default[i] <- learner$param_set$default[[i]]
print(i)
}
learner$param_set$default[[34]]
learner$param_set$default[[33]]
learner$param_set$default[[35]]
param_set<-data.frame(levels=list(rep(0,length(learner$param_set))),default=list(rep(0,length(learner$param_set))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:length(learner$param_set-1)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ',')
param_set$default[i] <- learner$param_set$default[[i]]
print(i)
}
for(i in 1:(length(learner$param_set-1))){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ',')
param_set$default[i] <- learner$param_set$default[[i]]
print(i)
}
for(i in 1:(length(learner$param_set)-1)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ',')
param_set$default[i] <- learner$param_set$default[[i]]
print(i)
}
length(learner$param_set)
learner$param_set$default[[34]]
learner$param_set$default[[41]]
learner$param_set$default
length(learner$param_set$default)
names(learner$param_set$default[[2]])
param_set<-data.frame(levels=list(rep(0,length(learner$param_set))),default=list(rep(0,length(learner$param_set))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:(length(learner$param_set)-1)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ',')
#param_set$default[i] <- learner$param_set$default[[i]]
#print(i)
}
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels, default= learner$param_set$default)
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels)
param_set$levels
names(learner$param_set$default[[2]])unname(learner$param_set$class)
unname(learner$param_set$class)
param_set$levels
unname(learner$param_set$lower)
unname(learner$param_set$upper)
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels)
param_set<-data.frame(levels=list(rep(0,length(learner$param_set))),default=list(rep(0,length(learner$param_set))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels)
param_set$levels
param_set<-data.frame(levels=list(rep(0,length(learner$param_set))),default=list(rep(0,length(learner$param_set))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:(length(learner$param_set)-2)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ',')
#param_set$default[i] <- learner$param_set$default[[i]]
#print(i)
}
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels)
param_set<-data.frame(levels=list(rep(0,length(learner$param_set)-1)),default=list(rep(0,length(learner$param_set))))
param_set<-data.frame(levels=list(rep(0,length(learner$param_set)-1)),default=list(rep(0,length(learner$param_set))))
param_set<-data.frame(levels=list(rep(0,(length(learner$param_set)-1))),default=list(rep(0,length(learner$param_set))))
param_set<-data.frame(levels=list(rep(0,(length(learner$param_set)-1))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:(length(learner$param_set)-1)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ',')
#param_set$default[i] <- learner$param_set$default[[i]]
#print(i)
}
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels)
pd
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels, default = learner$param_set$default)
learner$param_set$default
learner$param_set
learner$param_set
names(learner$param_set)
names(learner$param_set$levels)
learner$param_set$default[names[learner$param_set$levels][1]]
learner$param_set$default[names(learner$param_set$levels)[1]]
learner$param_set$default[names(learner$param_set$levels)[1]][[1]]
param_set<-data.frame(levels=list(rep(0,(length(learner$param_set)-1))),default=list(rep(0,(length(learner$param_set)-1))))
for(i in 1:(length(learner$param_set)-1)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ', ')
param_set$default[i] <- learner$param_set$default[names(learner$param_set$levels)[i]][[1]]
#print(i)
}
param_set<-data.frame(levels=list(rep(0,(length(learner$param_set)-1))),default=list(rep(0,(length(learner$param_set)-1))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:(length(learner$param_set)-1)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ', ')
if(length(learner$param_set$default[names(learner$param_set$levels)[i]][[1]])!=0)
{
param_set$default[i] <- learner$param_set$default[names(learner$param_set$levels)[i]][[1]]
}
else{
param_set$default[i] <- NA
}
#print(i)
}
param_set$default
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels, default = learner$param_set$default)
NROW(learner$param_set$default)
NROW(param_set$levels)
param_set<-data.frame(levels=list(rep(0,(length(learner$param_set)-1))),default=list(rep(0,(length(learner$param_set)-1))))
p <- as.data.table(learner$param_set)[,c(1,2,3,4,5,9,10)]
for(i in 1:(length(learner$param_set)-1)){
param_set$levels[i] <- paste(learner$param_set$levels[[i]], collapse = ', ')
if(length(learner$param_set$default[names(learner$param_set$levels)[i]][[1]])!=0)
{
param_set$default[i] <- learner$param_set$default[names(learner$param_set$levels)[i]][[1]]
}
else{
param_set$default[i] <- "NA"
}
#print(i)
}
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels, default = learner$param_set$default)
NROW(unname(learner$param_set$class))
NROW(unname(learner$param_set$lower))
NROW(unname(learner$param_set$upper))
NROW(param_set$levels)
NROW(param_set$default)
pd <- data.frame(class = unname(learner$param_set$class), lower = unname(learner$param_set$lower), unname(learner$param_set$upper), levels = param_set$levels, default = param_set$default)
pd
learner = lrn("surv.blackboost")
learner$param_set$ids()
#training
learner$train(train_task)
learner$model
#predictions
prediction <- learner$predict(test_task)
prediction
#score
prediction$score()
search_space = ps(
family = p_fct(list("cindex","coxph")),
mstop = p_int(lower = 70, upper = 130),
nu = p_dbl(lower = 0.01, upper = 0.1),
maxdepth = p_int(lower = 2, upper = 8),
stopintern = p_lgl()
)
search_space
CVstrat = rsmp("cv", folds = 10)
measure = msr("surv.cindex")
print(measure)
combo <- trm("combo",
list(trm("evals", n_evals = 50),
trm("stagnation")),
any = TRUE
)
instance = TuningInstanceSingleCrit$new(
task = train_task,
measure = measure,
learner = learner,
resampling = CVstrat,
search_space = search_space,
terminator = combo
)
instance
tuner = tnr("random_search")
tuner$optimize(instance)
instance$is_terminated
#number of optimal stap number
instance$result_learner_param_vals
#step number vs harrel_c
as.data.table(instance$archive)
#train with optimal stepnumber
learner$param_set$values = instance$result_learner_param_vals
learner$train(train_task)
learner$model
prediction = learner$predict(test_task)
prediction
prediction$score()
knitr::opts_chunk$set(echo = TRUE)
library(survivalmodels)
library(mlr3proba); library(mlr3); library(survival)
library(mlr3misc)
library(survival)
library(mboost)
library(mlr3learners)
library(mlr3extralearners)
library("mlr3viz")
autoplot(gbcs_task)
knitr::opts_chunk$set(echo = TRUE)
library(survivalmodels)
library(mlr3proba); library(mlr3); library(survival)
library(mlr3misc)
library(survival)
library(mboost)
library(mlr3learners)
library(mlr3extralearners)
description <- c("Identification Code.","Date of diagnosis.","Date of recurrence free survival.","Date of death.","Age at diagnosis (years).",
"Menopausal status. 1 = Yes, 0 = No.", "Hormone therapy. 1 = Yes. 0 = No.","Tumor size (mm).","Tumor grade (1-3).","Number of nodes.",
"Number of progesterone receptors.","Number of estrogen receptors.","Time to recurrence (days).","Recurrence status. 1 = Recurrence. 0 = Censored.", "Time to death (days).", "Censoring status. 1 = Death. 0 = Censored.")
data.frame("variable" = colnames(gbcs),description)
#load dataset
gbcs <- mlr3proba::gbcs
#select relevant variables
gbcs2 <- gbcs[,c(5:12,15:16)]
summarytools::dfSummary(gbcs,
graph.col = F,
valid.col = F
)
set.seed(123)
train_set = sample(nrow(gbcs2), 0.8 * nrow(gbcs2))
test_set = setdiff(seq_len(nrow(gbcs2)), train_set)
train_gbcs <- gbcs2[train_set, ]
test_gbcs <- gbcs2[test_set, ]
train_task = TaskSurv$new(id = "train_gbcs",
backend = train_gbcs,
time = "survtime",
event = "censdead")
test_task = TaskSurv$new(id = "test_gbcs",
backend = test_gbcs,
time = "survtime",
event = "censdead")
gbcs_task = TaskSurv$new(id = "gbcs",
backend = gbcs2,
time = "survtime", event = "censdead")
library("mlr3viz")
autoplot(gbcs_task)
knitr::opts_chunk$set(echo = TRUE)
library(survivalmodels)
library(mlr3proba); library(mlr3); library(survival)
library(mlr3misc)
library(survival)
library(mboost)
library(mlr3learners)
library(mlr3extralearners)
gbcs <- mlr3proba::gbcs
str(gbcs)
description <- c("Identification Code.","Date of diagnosis.","Date of recurrence free survival.","Date of death.","Age at diagnosis (years).",
"Menopausal status. 1 = Yes, 0 = No.", "Hormone therapy. 1 = Yes. 0 = No.","Tumor size (mm).","Tumor grade (1-3).","Number of nodes.",
"Number of progesterone receptors.","Number of estrogen receptors.","Time to recurrence (days).","Recurrence status. 1 = Recurrence. 0 = Censored.", "Time to death (days).", "Censoring status. 1 = Death. 0 = Censored.")
data.frame("variable" = colnames(gbcs),description)
gbcs <- gbcs[,c(5:12,15:16)]
gbcs$menopause <- gbcs$menopause-1
gbcs$hormone <- gbcs$hormone-1
gbcs$grade1 <- ifelse(gbcs$grade==1, 1,0)
gbcs$grade2 <- ifelse(gbcs$grade==2, 1,0)
gbcs$grade3 <- ifelse(gbcs$grade==3, 1,0)
gbcs$grade <- NULL
gbcs$size <- scale(gbcs$size)
gbcs$age <- scale(gbcs$age)
gbcs$nodes <- scale(gbcs$nodes)
gbcs$prog_recp <- scale(gbcs$prog_recp)
gbcs$estrg_recp <- scale(gbcs$estrg_recp)
set.seed(123)
train_set = sample(nrow(gbcs), 0.8 * nrow(gbcs))
test_set = setdiff(seq_len(nrow(gbcs)), train_set)
train_gbcs <- gbcs[train_set, ]
test_gbcs <- gbcs[test_set, ]
train_task = TaskSurv$new(id = "train_gbcs",
backend = train_gbcs,
time = "survtime",
event = "censdead")
test_task = TaskSurv$new(id = "test_gbcs",
backend = test_gbcs,
time = "survtime",
event = "censdead")
gbcs_task = TaskSurv$new(id = "gbcs",
backend = gbcs,
time = "survtime", event = "censdead")
library("mlr3viz")
autoplot(gbcs_task)
library(mlr3extralearners)
library(mlr3proba)
library(mlr3tuning)
library(paradox)
install_learners('surv.blackboost')
learner.bb = lrn("surv.blackboost", id="blackboost", predict_sets=c("train","test"))
library(mlr3extralearners)
library(mlr3proba)
library(mlr3tuning)
library(paradox)
install_learners('surv.blackboost')
learner.bb = lrn("surv.blackboost", id="blackboost", predict_sets=c("train","test"))
#here we change the output displayed by learner$param_set. We re-encode list items as their string representation.
#In particular, we prefer levels and default attributes to be displayed with their values instead of their raw representation.
param_set<-data.frame(levels=list(rep(0,(length(learner.bb$param_set)-1))),default=list(rep(0,(length(learner.bb$param_set)-1))))
for(i in 1:(length(learner.bb$param_set)-1)){
param_set$levels[i] <- paste(learner.bb$param_set$levels[[i]], collapse = ', ')
if(length(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!=0)
{
param_set$default[i] <- learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]]
}
else{
param_set$default[i] <- "NA"
}
}
names(learner.bb$param_set$levels)[1]
learner.bb$param_set$default[names(learner.bb$param_set$levels)[1]][[1]]
param_set$default[1] <- learner.bb$param_set$default[names(learner.bb$param_set$levels)[1]][[1]]
#here we change the output displayed by learner$param_set. We re-encode list items as their string representation.
#In particular, we prefer levels and default attributes to be displayed with their values instead of their raw representation.
param_set<-data.frame(levels=list(rep(0,(length(learner.bb$param_set)-1))),default=list(rep(0,(length(learner.bb$param_set)-1))))
for(i in 1:(length(learner.bb$param_set)-1)){
param_set$levels[i] <- paste(learner.bb$param_set$levels[[i]], collapse = ', ')
if(length(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!=0)
{
param_set$default[i] <- learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]]
}
else{
param_set$default[i] <- "NA"
}
}
param_set<-data.frame(levels=list(rep(0,(length(learner.bb$param_set)-1))),default=list(rep(0,(length(learner.bb$param_set)-1))))
for(i in 1:(length(learner.bb$param_set)-1)){
param_set$levels[i] <- paste(learner.bb$param_set$levels[[i]], collapse = ', ')
if(length(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!=0)
{
param_set$default[i] <- learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]]
print(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])
}
else{
param_set$default[i] <- "NA"
}
}
param_set<-data.frame(levels=list(rep(0,(length(learner.bb$param_set)-1))),default=list(rep(0,(length(learner.bb$param_set)-1))))
for(i in 1:(length(learner.bb$param_set)-1)){
param_set$levels[i] <- paste(learner.bb$param_set$levels[[i]], collapse = ', ')
if(length(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!=0)
{
print(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])
param_set$default[i] <- learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]]
}
else{
param_set$default[i] <- "NA"
}
}
param_set<-data.frame(levels=list(rep(0,(length(learner.bb$param_set)-1))),default=list(rep(0,(length(learner.bb$param_set)-1))))
for(i in 1:(length(learner.bb$param_set)-1)){
param_set$levels[i] <- paste(learner.bb$param_set$levels[[i]], collapse = ', ')
if(length(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!=0)
{
print(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])
print(i)
param_set$default[i] <- learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]]
}
else{
param_set$default[i] <- "NA"
}
}
typeof(learner.bb$param_set$default[names(learner.bb$param_set$levels)[41]][[1]])
param_set<-data.frame(levels=list(rep(0,(length(learner.bb$param_set)-1))),default=list(rep(0,(length(learner.bb$param_set)-1))))
for(i in 1:(length(learner.bb$param_set)-1)){
param_set$levels[i] <- paste(learner.bb$param_set$levels[[i]], collapse = ', ')
if(length(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!=0 & typeof(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!="closure")
{
param_set$default[i] <- learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]]
}
else{
param_set$default[i] <- "NA"
}
}
knitr::opts_chunk$set(echo = TRUE)
library(survivalmodels)
library(mlr3proba); library(mlr3); library(survival)
library(mlr3misc)
library(survival)
library(mboost)
library(mlr3learners)
library(mlr3extralearners)
gbcs <- mlr3proba::gbcs
str(gbcs)
description <- c("Identification Code.","Date of diagnosis.","Date of recurrence free survival.","Date of death.","Age at diagnosis (years).",
"Menopausal status. 1 = Yes, 0 = No.", "Hormone therapy. 1 = Yes. 0 = No.","Tumor size (mm).","Tumor grade (1-3).","Number of nodes.",
"Number of progesterone receptors.","Number of estrogen receptors.","Time to recurrence (days).","Recurrence status. 1 = Recurrence. 0 = Censored.", "Time to death (days).", "Censoring status. 1 = Death. 0 = Censored.")
data.frame("variable" = colnames(gbcs),description)
gbcs <- gbcs[,c(5:12,15:16)]
gbcs$menopause <- gbcs$menopause-1
gbcs$hormone <- gbcs$hormone-1
gbcs$grade1 <- ifelse(gbcs$grade==1, 1,0)
gbcs$grade2 <- ifelse(gbcs$grade==2, 1,0)
gbcs$grade3 <- ifelse(gbcs$grade==3, 1,0)
gbcs$grade <- NULL
gbcs$size <- scale(gbcs$size)
gbcs$age <- scale(gbcs$age)
gbcs$nodes <- scale(gbcs$nodes)
gbcs$prog_recp <- scale(gbcs$prog_recp)
gbcs$estrg_recp <- scale(gbcs$estrg_recp)
set.seed(123)
train_set = sample(nrow(gbcs), 0.8 * nrow(gbcs))
test_set = setdiff(seq_len(nrow(gbcs)), train_set)
train_gbcs <- gbcs[train_set, ]
test_gbcs <- gbcs[test_set, ]
train_task = TaskSurv$new(id = "train_gbcs",
backend = train_gbcs,
time = "survtime",
event = "censdead")
test_task = TaskSurv$new(id = "test_gbcs",
backend = test_gbcs,
time = "survtime",
event = "censdead")
gbcs_task = TaskSurv$new(id = "gbcs",
backend = gbcs,
time = "survtime", event = "censdead")
library("mlr3viz")
autoplot(gbcs_task)
library(mlr3extralearners)
library(mlr3proba)
library(mlr3tuning)
library(paradox)
install_learners('surv.blackboost')
learner.bb = lrn("surv.blackboost", id="blackboost", predict_sets=c("train","test"))
param_set<-data.frame(levels=list(rep(0,(length(learner.bb$param_set)-1))),default=list(rep(0,(length(learner.bb$param_set)-1))))
for(i in 1:(length(learner.bb$param_set)-1)){
param_set$levels[i] <- paste(learner.bb$param_set$levels[[i]], collapse = ', ')
if(length(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!=0 & typeof(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!="closure")
{
param_set$default[i] <- learner$param_set$default[names(learner.bb$param_set$levels)[i]][[1]]
}
else{
param_set$default[i] <- "NA"
}
}
param_set<-data.frame(levels=list(rep(0,(length(learner.bb$param_set)-1))),default=list(rep(0,(length(learner.bb$param_set)-1))))
for(i in 1:(length(learner.bb$param_set)-1)){
param_set$levels[i] <- paste(learner.bb$param_set$levels[[i]], collapse = ', ')
if(length(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!=0 & typeof(learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]])!="closure")
{
param_set$default[i] <- learner.bb$param_set$default[names(learner.bb$param_set$levels)[i]][[1]]
}
else{
param_set$default[i] <- "NA"
}
}
params <- data.frame(class = unname(learner.bb$param_set$class), lower = unname(learner.bb$param_set$lower), unname(learner.bb$param_set$upper), levels = param_set$levels, default = param_set$default)
params
params
