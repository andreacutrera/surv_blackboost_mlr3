---
title: "Survival Analysis with mlr3's Blackboost"
author: "Andrea Cutrera, Sonia Petrini, Elisabetta Rocchetti, Ruben Popper"
date: "5/28/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(survivalmodels)
library(mlr3proba); library(mlr3); library(survival)
library(mlr3misc)
library(survival)
library(mboost)
library(mlr3learners)
library(mlr3extralearners)
```

## Dataset

The aim of this report is to perform Survival Analysis on the German Breast Cancer Study (GBCS) Dataset from Hosmer et al. 
The machine learning tool that will be implemented is the mlr3 extra learner "surv.blackboost" (documentation available at: [mlr_learners_surv.blackboost](https://rdrr.io/github/mlr-org/mlr3extralearners/man/mlr_learners_surv.blackboost.html)), 
which combines a CART algorithm with Gradient Boosting.

This method calls blackboost from the mboost package 



The structure of the data is the following:
  - observations: 686 - patients with primary node positive breast cancer.
  - variables: 16 - biological factors concerning patients and tumor severity.
  
The Survival Analysis' dimensions are stored in these variables:
  - censdead: Censoring status. 1 = Death. 0 = Censored.
  - survtime: Time to death (days).
  

  

  
  

```{r}
description <- c("Identification Code.","Date of diagnosis.","Date of recurrence free survival.","Date of death.","Age at diagnosis (years).",
           "Menopausal status. 1 = Yes, 0 = No.", "Hormone therapy. 1 = Yes. 0 = No.","Tumor size (mm).","Tumor grade (1-3).","Number of nodes.",
           "Number of progesterone receptors.","Number of estrogen receptors.","Time to recurrence (days).","Recurrence status. 1 = Recurrence. 0 = Censored.", "Time to death (days).", "Censoring status. 1 = Death. 0 = Censored.")
data.frame("variable" = colnames(gbcs),description)
```



```{r cars}
#load dataset
gbcs <- mlr3proba::gbcs

#select relevant variables 
gbcs <- gbcs[,c(5:12,15:16)]
summarytools::dfSummary(gbcs, 
                        graph.col = F, 
                        valid.col = F
)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
